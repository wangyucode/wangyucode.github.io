1:"$Sreact.fragment"
2:I[58522,["/_next/static/chunks/1e02b7c5799ac6a1.js","/_next/static/chunks/3b6828ba17d8ab80.js","/_next/static/chunks/473a1be2867482bb.js","/_next/static/chunks/a5d1ba47f41dfe06.js"],""]
28:I[49558,["/_next/static/chunks/1e02b7c5799ac6a1.js","/_next/static/chunks/3b6828ba17d8ab80.js","/_next/static/chunks/473a1be2867482bb.js","/_next/static/chunks/a5d1ba47f41dfe06.js"],"AdSenseCard"]
29:I[9725,["/_next/static/chunks/1e02b7c5799ac6a1.js","/_next/static/chunks/3b6828ba17d8ab80.js","/_next/static/chunks/473a1be2867482bb.js","/_next/static/chunks/a5d1ba47f41dfe06.js"],"default"]
2a:I[89864,["/_next/static/chunks/1e02b7c5799ac6a1.js","/_next/static/chunks/3b6828ba17d8ab80.js","/_next/static/chunks/473a1be2867482bb.js","/_next/static/chunks/a5d1ba47f41dfe06.js"],"default"]
2b:I[71933,["/_next/static/chunks/be77d35d8dddc77a.js","/_next/static/chunks/0a126d9629c9d34c.js"],"OutletBoundary"]
2c:"$Sreact.suspense"
:HL["https://tse3-mm.cn.bing.net/th/id/OIP-C.BJ09SzSPlUf5QzF_EryfdwAAAA?pid=ImgDet&rs=1","image"]
0:{"buildId":"wycode_has_super_power","rsc":["$","$1","c",{"children":[["$","div",null,{"className":"container mx-auto w-full p-4","children":[["$","article",null,{"className":"card shadow bg-base-100 p-4 mb-4","children":[["$","h1",null,{"className":"text-2xl text-slate-800 dark:text-slate-200 font-extrabold text-center","children":"Spring JPA框架中的@ManyToMany多对多关系的理解和使用"}],["$","div",null,{"className":"flex justify-between text-sm mb-4 flex-wrap gap-2","children":[["$","span",null,{"className":"flex items-center","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","strokeWidth":1.5,"stroke":"currentColor","aria-hidden":"true","data-slot":"icon","className":"inline mr-1 h-5","children":[null,["$","path",null,{"strokeLinecap":"round","strokeLinejoin":"round","d":"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}]]}],"2018-04-19"]}],["$","$L2",null,{"href":"/blog/category/backend","className":"flex items-center px-3 py-1 bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/30 dark:hover:bg-blue-900/50 text-sm rounded-full","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","strokeWidth":1.5,"stroke":"currentColor","aria-hidden":"true","data-slot":"icon","className":"inline mr-1 h-4 mb-0.5","children":[null,["$","path",null,{"strokeLinecap":"round","strokeLinejoin":"round","d":"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}]]}],"Backend"]}]]}],["$","div",null,{"className":"flex items-center gap-2 mb-4","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","strokeWidth":1.5,"stroke":"currentColor","aria-hidden":"true","data-slot":"icon","className":"inline h-5","children":[null,["$","path",null,{"strokeLinecap":"round","strokeLinejoin":"round","d":"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}],["$","path",null,{"strokeLinecap":"round","strokeLinejoin":"round","d":"M6 6h.008v.008H6V6Z"}]]}],["$","div",null,{"className":"flex flex-wrap gap-1","children":[["$","$L2","Spring",{"href":"/blog/tag/spring","className":"px-2 bg-pink-50 hover:bg-pink-100 dark:bg-pink-900/30 dark:hover:bg-pink-900/50 text-sm rounded-full","children":"Spring"}],["$","$L2","JPA",{"href":"/blog/tag/jpa","className":"px-2 bg-pink-50 hover:bg-pink-100 dark:bg-pink-900/30 dark:hover:bg-pink-900/50 text-sm rounded-full","children":"JPA"}],["$","$L2","Java",{"href":"/blog/tag/java","className":"px-2 bg-purple-50 hover:bg-purple-100 dark:bg-purple-900/30 dark:hover:bg-purple-900/50 text-sm rounded-full","children":"Java"}]]}]]}],["$","div",null,{"className":"mt-4","children":["$","div",null,{"className":"prose max-w-full","children":[["$","figure","img-0",{"className":"flex flex-col items-center","children":[["$","img",null,{"src":"https://tse3-mm.cn.bing.net/th/id/OIP-C.BJ09SzSPlUf5QzF_EryfdwAAAA?pid=ImgDet&rs=1","alt":"Spring JPA","node":{"type":"element","tagName":"img","properties":{"src":"https://tse3-mm.cn.bing.net/th/id/OIP-C.BJ09SzSPlUf5QzF_EryfdwAAAA?pid=ImgDet&rs=1","alt":"Spring JPA"},"children":[],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":98,"offset":98}}},"className":"mx-auto max-h-64 max-w-72"}],["$","figcaption",null,{"className":"text-sm text-gray-500 dark:text-gray-400 mt-1","children":"Spring JPA"}]]}],"\n",["$","blockquote","blockquote-0",{"children":["\n",["$","p","p-0",{"children":"JPA是Java Persistence API的简称是Java的ORM规范，实现这个规范的有著名的Hibernate等ORM框架。JDK 5.0注解或XML描述对象－关系表的映射关系，并将运行期的实体对象持久化到数据库中。"}],"\n"]}],"\n","$L3","\n","<!--more-->","\n","$L4","\n","$L5","\n","$L6","\n","$L7","\n","$L8","\n","$L9","\n","$La","\n","$Lb","\n","$Lc","\n","$Ld","\n","$Le","\n","$Lf","\n","$L10","\n","$L11","\n","$L12","\n","$L13","\n","$L14","\n","$L15","\n","$L16","\n","$L17","\n","$L18","\n","$L19","\n","$L1a","\n","$L1b","\n","$L1c","\n","$L1d","\n","$L1e","\n","$L1f"]}]}]]}],"$L20","$L21","$L22"]}],["$L23","$L24"],"$L25"]}],"loading":null,"isPartial":false}
3:["$","p","p-0",{"children":["多对多关系是关联关系中最复杂的。本文使用Spring JPA框架总结多对多关系及",["$","code","code-0",{"children":"@ManyToMany"}],"注解的详细使用。明白了",["$","code","code-1",{"children":"@ManyToMany"}],",其它\n",["$","code","code-2",{"children":"@OneToMany"}]," 和",["$","code","code-3",{"children":"@OneToOne"}],"就简单很多了。"]}]
4:["$","h2","h2-0",{"children":"Java和JPA中的多对多关系"}]
5:["$","blockquote","blockquote-1",{"children":["\n",["$","p","p-0",{"children":"根据维基百科定义：Java中的多对多关系是指源对象具有目标对象集合的属性，并且（如果存在的话）这个目标对象与原对象具有反向关系，则它也将成为多对多关系。需要注意的是：Java和JPA中的所有关系都是单向的，因为存在源对象引用目标对象的情况下，也不能保证目标对象也与原对象有关系。这与关系数据库不同，在关系数据库中，通过外键定义并查询，使得反向查询总是存在的。"}],"\n"]}]
6:["$","blockquote","blockquote-2",{"children":["\n",["$","p","p-0",{"children":"JPA还定义了一个OneToMany关系，它与ManyToMany关系类似，但反向关系（如果已定义）是ManyToOne关系。 OneToMany与JPA中ManyToMany关系的主要区别在于，ManyToMany总是使用中间关系连接表来存储关系，OneToMany可以使用连接表或者目标对象的表引用中的外键源对象表的主键。"}],"\n"]}]
7:["$","p","p-1",{"children":["传统项目开发，会有一个设计表的过程，然后由DBA写一大堆",["$","code","code-0",{"children":"create table ***"}],"。很麻烦也很慢。"]}]
8:["$","p","p-2",{"children":["JPA框架在运行时，会根据实体定义自动创建表，自动更新表字段，使用JPA可以说一行SQL都不用写，甚至不用关心底层数据库到底是",["$","code","code-0",{"children":"MySQL"}],"还是",["$","code","code-1",{"children":"Oracle"}],"还是其它。以下例子中我不定义表名，列名，所以没有",["$","code","code-2",{"children":"@Column"}],"、",["$","code","code-3",{"children":"@Table"}],"、",["$","code","code-4",{"children":"@JoinTable"}],"、",["$","code","code-5",{"children":"@JoinColumn"}],"等。由JPA框架自动根据实体名称生成表名，列名。我觉得Hibernate生成的表名和列名挺好也符合规范。就不多此一举了。"]}]
9:["$","h2","h2-1",{"children":"@ManyToMany 注解"}]
a:["$","p","p-3",{"children":["在JPA中使用",["$","code","code-0",{"children":"@ManyToMany"}],"注解表示多对多关系。"]}]
b:["$","p","p-4",{"children":"学生和老师，典型的多对多关系:"}]
26:T14bb,<pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:light-dark(#ffffff, #121212);--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;color:light-dark(#393a34, #dbd7caee);--shiki-light:#393a34;--shiki-dark:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">@</span><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">Entity</span></span>
<span class="line"><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">public</span><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676"> class</span><span style="color:light-dark(#2E8F82, #5DA994);--shiki-light:#2E8F82;--shiki-dark:#5DA994"> Student</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666"> {</span></span>
<span class="line"><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">    @</span><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">Id</span></span>
<span class="line"><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">    private</span><span style="color:light-dark(#393A34, #DBD7CAEE);--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> String</span><span style="color:light-dark(#B07D48, #BD976A);--shiki-light:#B07D48;--shiki-dark:#BD976A"> id</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">    @</span><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">ManyToMany</span></span>
<span class="line"><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">    private</span><span style="color:light-dark(#393A34, #DBD7CAEE);--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> List</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">Teacher</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">></span><span style="color:light-dark(#B07D48, #BD976A);--shiki-light:#B07D48;--shiki-dark:#BD976A"> teachers</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">@</span><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">Entity</span></span>
<span class="line"><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">public</span><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676"> class</span><span style="color:light-dark(#2E8F82, #5DA994);--shiki-light:#2E8F82;--shiki-dark:#5DA994"> Teacher</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666"> {</span></span>
<span class="line"><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">    @</span><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">Id</span></span>
<span class="line"><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">    private</span><span style="color:light-dark(#393A34, #DBD7CAEE);--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> String</span><span style="color:light-dark(#B07D48, #BD976A);--shiki-light:#B07D48;--shiki-dark:#BD976A"> id</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">    @</span><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">ManyToMany</span></span>
<span class="line"><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">    private</span><span style="color:light-dark(#393A34, #DBD7CAEE);--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> List</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">Student</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">></span><span style="color:light-dark(#B07D48, #BD976A);--shiki-light:#B07D48;--shiki-dark:#BD976A"> students</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">}</span></span>
<span class="line"></span></code></pre>c:["$","div","pre-0",{"dangerouslySetInnerHTML":{"__html":"$26"}}]
d:["$","p","p-5",{"children":["上面例子中的",["$","code","code-0",{"children":"@ManyToMany"}],"即表示了老师和学生的多对多关系。",["$","code","code-1",{"children":"@ManyToMany"}],"注解可以用在字段或方法上。"]}]
e:["$","p","p-6",{"children":["但这样做是有问题的，生成的中间表有两个，",["$","code","code-0",{"children":"TEACHER_STUDENTS"}],"表和",["$","code","code-1",{"children":"STUDENT_TEACHERS"}],"。原因是这里的多对多关系正是维基百科提到的单向原则。老师和学生虽然分别定义了自己的多对多关系，但这个关系都是单向的，要使关系成为双向。就需要下面的",["$","code","code-2",{"children":"mappedBy"}],"属性。"]}]
f:["$","h2","h2-2",{"children":"mappedBy 属性"}]
10:["$","p","p-7",{"children":[["$","code","code-0",{"children":"mappedBy"}],"是OneToOne、OneToMany和ManyToMany这三种关联关系的属性。"]}]
11:["$","p","p-8",{"children":["用来标注",["$","strong","strong-0",{"children":"拥有"}],"这种关系的字段。 除非关系是单向的，否则是必需的。"]}]
12:["$","p","p-9",{"children":"那么什么叫拥有关联关系呢，假设是双向一对一的话，那么拥有关系的这一方有建立、解除和更新与另一方关系的能力。而另一方没有，只能被动管理。"}]
13:["$","p","p-10",{"children":["由于",["$","code","code-0",{"children":"JoinTable"}],"和",["$","code","code-1",{"children":"JoinColumn"}],"一般定义在拥有关系的这一端，而",["$","code","code-2",{"children":"mappedBy"}],"一定是定义在关系的被拥有方（the owned side），也就是跟定义",["$","code","code-3",{"children":"JoinTable"}],"和",["$","code","code-4",{"children":"JoinColumn"}],"互斥的一方，它的值指向拥有方中关于被拥有方的字段，可能是一个对象（",["$","code","code-5",{"children":"OneToMany"}],"），也可能是一个对象集合（",["$","code","code-6",{"children":"ManyToMany"}],"）。"]}]
14:["$","p","p-11",{"children":"上面的例子中，维护老师和学生的多对多关系，明显只需要一张中间表就可以了，我们假设老师是维护关系（拥有关系）的一端，则实体定义修改如下："}]
27:T1797,<pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:light-dark(#ffffff, #121212);--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;color:light-dark(#393a34, #dbd7caee);--shiki-light:#393a34;--shiki-dark:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">@</span><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">Entity</span></span>
<span class="line"><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">public</span><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676"> class</span><span style="color:light-dark(#2E8F82, #5DA994);--shiki-light:#2E8F82;--shiki-dark:#5DA994"> Student</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666"> {</span></span>
<span class="line"><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">    @</span><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">Id</span></span>
<span class="line"><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">    private</span><span style="color:light-dark(#393A34, #DBD7CAEE);--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> String</span><span style="color:light-dark(#B07D48, #BD976A);--shiki-light:#B07D48;--shiki-dark:#BD976A"> id</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">    @</span><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">ManyToMany</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">(</span><span style="color:light-dark(#A65E2B, #C99076);--shiki-light:#A65E2B;--shiki-dark:#C99076">mappedBy</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666"> =</span><span style="color:light-dark(#B5695977, #C98A7D77);--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="color:light-dark(#B56959, #C98A7D);--shiki-light:#B56959;--shiki-dark:#C98A7D">students</span><span style="color:light-dark(#B5695977, #C98A7D77);--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">)</span></span>
<span class="line"><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">    private</span><span style="color:light-dark(#393A34, #DBD7CAEE);--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> List</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">Teacher</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">></span><span style="color:light-dark(#B07D48, #BD976A);--shiki-light:#B07D48;--shiki-dark:#BD976A"> teachers</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">@</span><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">Entity</span></span>
<span class="line"><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">public</span><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676"> class</span><span style="color:light-dark(#2E8F82, #5DA994);--shiki-light:#2E8F82;--shiki-dark:#5DA994"> Teacher</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666"> {</span></span>
<span class="line"><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">    @</span><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">Id</span></span>
<span class="line"><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">    private</span><span style="color:light-dark(#393A34, #DBD7CAEE);--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> String</span><span style="color:light-dark(#B07D48, #BD976A);--shiki-light:#B07D48;--shiki-dark:#BD976A"> id</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">    @</span><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">ManyToMany</span></span>
<span class="line"><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">    private</span><span style="color:light-dark(#393A34, #DBD7CAEE);--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> List</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">&#x3C;</span><span style="color:light-dark(#AB5959, #CB7676);--shiki-light:#AB5959;--shiki-dark:#CB7676">Student</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">></span><span style="color:light-dark(#B07D48, #BD976A);--shiki-light:#B07D48;--shiki-dark:#BD976A"> students</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">}</span></span>
<span class="line"></span></code></pre>15:["$","div","pre-1",{"dangerouslySetInnerHTML":{"__html":"$27"}}]
16:["$","p","p-12",{"children":["这时中间表只有一张",["$","code","code-0",{"children":"TEACHER_STUDENTS"}],"，关联关系也变成了我们想要的双向关系。"]}]
17:["$","h2","h2-3",{"children":"Cascade 级联关系"}]
18:["$","p","p-13",{"children":"实际业务中，我们通常会遇到以下情况："}]
19:["$","ol","ol-0",{"children":["\n",["$","li","li-0",{"children":"用户和用户的收货地址是一对多关系，当用户被删除时，这个用户的所有收货地址也应该一并删除。"}],"\n",["$","li","li-1",{"children":"订单和订单中的商品也是一对多关系，但订单被删除时，订单所关联的商品肯定不能被删除。"}],"\n"]}]
1a:["$","p","p-14",{"children":"此时只要配置正确的级联关系，就能达到想要的效果。"}]
1b:["$","h3","h3-0",{"children":"级联关系类型："}]
1c:["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"CascadeType.REFRESH：级联刷新，当多个用户同时作操作一个实体，为了用户取到的数据是实时的，在用实体中的数据之前就可以调用一下refresh()方法"}],"\n",["$","li","li-1",{"children":"CascadeType.REMOVE：级联删除，当调用remove()方法删除Order实体时会先级联删除OrderItem的相关数据"}],"\n",["$","li","li-2",{"children":"CascadeType.MERGE：级联更新，当调用了Merge()方法，如果Order中的数据改变了会相应的更新OrderItem中的数据"}],"\n",["$","li","li-3",{"children":"CascadeType.ALL：包含以上所有级联属性"}],"\n",["$","li","li-4",{"children":"CascadeType.PERSIST：级联保存，当调用了Persist() 方法，会级联保存相应的数据"}],"\n"]}]
1d:["$","p","p-15",{"children":["需要注意的是，",["$","code","code-0",{"children":"CascadeType.ALL"}],"要谨慎使用，为了达到数据同步，很多人喜欢用",["$","code","code-1",{"children":"CascadeType.ALL"}],"来实现。但上面订单和商品的例子就不适用。"]}]
1e:["$","h2","h2-4",{"children":"以上"}]
1f:["$","ul","ul-1",{"children":["\n",["$","li","li-0",{"children":"未经同意禁止转载！"}],"\n",["$","li","li-1",{"children":"不对的地方欢迎指正！"}],"\n"]}]
20:["$","$L28",null,{}]
21:["$","$L29",null,{}]
22:["$","$L2a",null,{"postId":"many-to-many"}]
23:["$","script","script-0",{"src":"/_next/static/chunks/473a1be2867482bb.js","async":true}]
24:["$","script","script-1",{"src":"/_next/static/chunks/a5d1ba47f41dfe06.js","async":true}]
25:["$","$L2b",null,{"children":["$","$2c",null,{"name":"Next.MetadataOutlet","children":"$@2d"}]}]
2d:null
