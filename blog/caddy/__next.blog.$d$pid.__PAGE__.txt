1:"$Sreact.fragment"
2:I[58522,["/_next/static/chunks/1e02b7c5799ac6a1.js","/_next/static/chunks/3b6828ba17d8ab80.js","/_next/static/chunks/473a1be2867482bb.js","/_next/static/chunks/a5d1ba47f41dfe06.js"],""]
10:I[49558,["/_next/static/chunks/1e02b7c5799ac6a1.js","/_next/static/chunks/3b6828ba17d8ab80.js","/_next/static/chunks/473a1be2867482bb.js","/_next/static/chunks/a5d1ba47f41dfe06.js"],"AdSenseCard"]
11:I[9725,["/_next/static/chunks/1e02b7c5799ac6a1.js","/_next/static/chunks/3b6828ba17d8ab80.js","/_next/static/chunks/473a1be2867482bb.js","/_next/static/chunks/a5d1ba47f41dfe06.js"],"default"]
12:I[89864,["/_next/static/chunks/1e02b7c5799ac6a1.js","/_next/static/chunks/3b6828ba17d8ab80.js","/_next/static/chunks/473a1be2867482bb.js","/_next/static/chunks/a5d1ba47f41dfe06.js"],"default"]
13:I[71933,["/_next/static/chunks/be77d35d8dddc77a.js","/_next/static/chunks/0a126d9629c9d34c.js"],"OutletBoundary"]
14:"$Sreact.suspense"
:HL["https://caddyserver.com/old/resources/images/caddy-logo.svg","image"]
3:Tef5,<pre class="shiki shiki-themes vitesse-light vitesse-dark" style="background-color:light-dark(#ffffff, #121212);--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;color:light-dark(#393a34, #dbd7caee);--shiki-light:#393a34;--shiki-dark:#dbd7caee" tabindex="0"><code><span class="line"><span style="color:light-dark(#998418, #B8A965);--shiki-light:#998418;--shiki-dark:#B8A965">services</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">:</span></span>
<span class="line"><span style="color:light-dark(#998418, #B8A965);--shiki-light:#998418;--shiki-dark:#B8A965">  caddy</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">:</span></span>
<span class="line"><span style="color:light-dark(#998418, #B8A965);--shiki-light:#998418;--shiki-dark:#B8A965">    image</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">:</span><span style="color:light-dark(#B56959, #C98A7D);--shiki-light:#B56959;--shiki-dark:#C98A7D"> caddy:2.8</span></span>
<span class="line"><span style="color:light-dark(#998418, #B8A965);--shiki-light:#998418;--shiki-dark:#B8A965">    container_name</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">:</span><span style="color:light-dark(#B56959, #C98A7D);--shiki-light:#B56959;--shiki-dark:#C98A7D"> caddy</span></span>
<span class="line"><span style="color:light-dark(#998418, #B8A965);--shiki-light:#998418;--shiki-dark:#B8A965">    restart</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">:</span><span style="color:light-dark(#B56959, #C98A7D);--shiki-light:#B56959;--shiki-dark:#C98A7D"> unless-stopped</span></span>
<span class="line"><span style="color:light-dark(#998418, #B8A965);--shiki-light:#998418;--shiki-dark:#B8A965">    ports</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">:</span></span>
<span class="line"><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">      -</span><span style="color:light-dark(#B5695977, #C98A7D77);--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="color:light-dark(#B56959, #C98A7D);--shiki-light:#B56959;--shiki-dark:#C98A7D">80:80</span><span style="color:light-dark(#B5695977, #C98A7D77);--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span></span>
<span class="line"><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">      -</span><span style="color:light-dark(#B5695977, #C98A7D77);--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="color:light-dark(#B56959, #C98A7D);--shiki-light:#B56959;--shiki-dark:#C98A7D">443:443</span><span style="color:light-dark(#B5695977, #C98A7D77);--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span></span>
<span class="line"><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">      -</span><span style="color:light-dark(#B5695977, #C98A7D77);--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="color:light-dark(#B56959, #C98A7D);--shiki-light:#B56959;--shiki-dark:#C98A7D">443:443/udp</span><span style="color:light-dark(#B5695977, #C98A7D77);--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span></span>
<span class="line"><span style="color:light-dark(#998418, #B8A965);--shiki-light:#998418;--shiki-dark:#B8A965">    volumes</span><span style="color:light-dark(#999999, #666666);--shiki-light:#999999;--shiki-dark:#666666">:</span></span>
<span class="line"><span style="color:light-dark(#B56959, #C98A7D);--shiki-light:#B56959;--shiki-dark:#C98A7D">      -./caddy/Caddyfile:/etc/caddy/Caddyfile:ro</span></span>
<span class="line"></span></code></pre>0:{"buildId":"wycode_has_super_power","rsc":["$","$1","c",{"children":[["$","div",null,{"className":"container mx-auto w-full p-4","children":[["$","article",null,{"className":"card shadow bg-base-100 p-4 mb-4","children":[["$","h1",null,{"className":"text-2xl text-slate-800 dark:text-slate-200 font-extrabold text-center","children":"Caddy的安装和使用"}],["$","div",null,{"className":"flex justify-between text-sm mb-4 flex-wrap gap-2","children":[["$","span",null,{"className":"flex items-center","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","strokeWidth":1.5,"stroke":"currentColor","aria-hidden":"true","data-slot":"icon","className":"inline mr-1 h-5","children":[null,["$","path",null,{"strokeLinecap":"round","strokeLinejoin":"round","d":"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}]]}],"2024-09-24"]}],["$","$L2",null,{"href":"/blog/category/linux","className":"flex items-center px-3 py-1 bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/30 dark:hover:bg-blue-900/50 text-sm rounded-full","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","strokeWidth":1.5,"stroke":"currentColor","aria-hidden":"true","data-slot":"icon","className":"inline mr-1 h-4 mb-0.5","children":[null,["$","path",null,{"strokeLinecap":"round","strokeLinejoin":"round","d":"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}]]}],"Linux"]}]]}],["$","div",null,{"className":"flex items-center gap-2 mb-4","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","strokeWidth":1.5,"stroke":"currentColor","aria-hidden":"true","data-slot":"icon","className":"inline h-5","children":[null,["$","path",null,{"strokeLinecap":"round","strokeLinejoin":"round","d":"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}],["$","path",null,{"strokeLinecap":"round","strokeLinejoin":"round","d":"M6 6h.008v.008H6V6Z"}]]}],["$","div",null,{"className":"flex flex-wrap gap-1","children":[["$","$L2","Linux",{"href":"/blog/tag/linux","className":"px-2 bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/30 dark:hover:bg-blue-900/50 text-sm rounded-full","children":"Linux"}],["$","$L2","Docker",{"href":"/blog/tag/docker","className":"px-2 bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/30 dark:hover:bg-blue-900/50 text-sm rounded-full","children":"Docker"}]]}]]}],["$","div",null,{"className":"mt-4","children":["$","div",null,{"className":"prose max-w-full","children":[["$","figure","img-0",{"className":"flex flex-col items-center","children":[["$","img",null,{"src":"https://caddyserver.com/old/resources/images/caddy-logo.svg","alt":"Caddy","node":{"type":"element","tagName":"img","properties":{"src":"https://caddyserver.com/old/resources/images/caddy-logo.svg","alt":"Caddy"},"children":[],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":70,"offset":70}}},"className":"mx-auto max-h-64 max-w-72"}],["$","figcaption",null,{"className":"text-sm text-gray-500 dark:text-gray-400 mt-1","children":"Caddy"}]]}],"\n",["$","blockquote","blockquote-0",{"children":["\n",["$","p","p-0",{"children":"之前一直使用Nginx作为反向代理和静态网站服务，Caddy作为替代，有诸多好处，比如：配置简单，支持API，Caddyfile, JSON多种配置方式；支持自动HTTPS，自动更新TLS证书；内置支持HTTP1, HTTP2, HTTP3, Websocket。"}],"\n"]}],"\n",["$","p","p-0",{"children":"这篇文章安装和配置Caddy的全流程"}],"\n","<!--more-->","\n",["$","h2","h2-0",{"children":"安装Caddy"}],"\n",["$","p","p-1",{"children":"当前安装最简单的方式当然是通过Docker了，这是docker-compose文件"}],"\n",["$","div","pre-0",{"dangerouslySetInnerHTML":{"__html":"$3"}}],"\n","$L4","\n","$L5","\n","$L6","\n","$L7","\n","$L8","\n","$L9"]}]}]]}],"$La","$Lb","$Lc"]}],["$Ld","$Le"],"$Lf"]}],"loading":null,"isPartial":false}
4:["$","p","p-2",{"children":["通过",["$","code","code-0",{"children":"docker compose up -d"}],"命令启动容器即可"]}]
5:["$","h2","h2-1",{"children":"配置Caddy"}]
6:["$","p","p-3",{"children":["以下是",["$","code","code-0",{"children":"wycode.cn"}]," 的 ",["$","code","code-1",{"children":"Caddyfile"}]," 配置。可以看到比nginx的配置简单了很多。"]}]
7:["$","pre","pre-1",{"children":["$","code","code-0",{"children":"wycode.cn {\n\n    encode zstd gzip\n\n    handle_path /upload/* {\n        root * /srv/upload\n        file_server browse\n    }\n\n    handle_path /swagger-ui/* {\n        root * /srv/swagger-ui\n        file_server\n    }\n\n    handle /api/v1/* {\n        reverse_proxy \"http://deno:8083\"\n    }\n\n    handle /mongo/* {\n        reverse_proxy \"http://mongo-express:8081\"\n    }\n\n    handle {\n        root * /srv/wycode\n        try_files {path} /{path}.html {path}/ /404.html\n        file_server\n    }\n}\n"}]}]
8:["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":[["$","strong","strong-0",{"children":"HTTP Content压缩："}]," ",["$","code","code-0",{"children":"encode zstd gzip"}]," 启用zstd和gzip压缩"]}],"\n",["$","li","li-1",{"children":[["$","strong","strong-0",{"children":"upload目录："}]," ",["$","code","code-0",{"children":"handle_path /upload/*"}]," 配置静态文件服务，",["$","code","code-1",{"children":"root * /srv/upload"}]," 表示将 ",["$","code","code-2",{"children":"/upload"}]," 目录映射到 ",["$","code","code-3",{"children":"/srv/upload"}]," 目录"]}],"\n",["$","li","li-2",{"children":[["$","strong","strong-0",{"children":"Swagger UI："}],["$","code","code-0",{"children":"handle_path /swagger-ui/*"}]," 配置静态文件服务，",["$","code","code-1",{"children":"root * /srv/swagger-ui"}]," 表示将 ",["$","code","code-2",{"children":"/swagger-ui"}]," 目录映射到 ",["$","code","code-3",{"children":"/srv/swagger-ui"}]," 目录"]}],"\n",["$","li","li-3",{"children":[["$","strong","strong-0",{"children":"Deno API："}],["$","code","code-0",{"children":"handle /api/v1/*"}]," 配置反向代理，",["$","code","code-1",{"children":"reverse_proxy \"http://deno:8083\""}]," 表示将 ",["$","code","code-2",{"children":"/api/v1"}]," 映射到 ",["$","code","code-3",{"children":"http://deno:8083"}]," 服务"]}],"\n",["$","li","li-4",{"children":[["$","strong","strong-0",{"children":"MongoDB WebUI："}],["$","code","code-0",{"children":"handle /mongo/*"}]," 配置反向代理，",["$","code","code-1",{"children":"reverse_proxy \"http://mongo-express:8081\""}]," 表示将 ",["$","code","code-2",{"children":"/mongo"}]," 映射到 ",["$","code","code-3",{"children":"http://mongo-express:8081"}]," 服务"]}],"\n",["$","li","li-5",{"children":[["$","strong","strong-0",{"children":"NextJs主站："}],["$","code","code-0",{"children":"handle"}]," 配置静态文件服务，",["$","code","code-1",{"children":"root * /srv/wycode"}]," 表示将 ",["$","code","code-2",{"children":"/"}]," 目录映射到 ",["$","code","code-3",{"children":"/srv/wycode"}]," 目录，",["$","code","code-4",{"children":"try_files {path} /{path}.html {path}/ /404.html"}]," 表示如果请求的路径不存在，则尝试查找 ",["$","code","code-5",{"children":"/"}]," 目录下的文件，如果文件不存在，则返回 404 错误。"]}],"\n"]}]
9:["$","p","p-4",{"children":["本文原始发表于 ",["$","a","a-0",{"href":"https://wycode.cn/blog/caddy","children":"https://wycode.cn/blog/caddy"}],"，转载请注明出处"]}]
a:["$","$L10",null,{}]
b:["$","$L11",null,{}]
c:["$","$L12",null,{"postId":"caddy"}]
d:["$","script","script-0",{"src":"/_next/static/chunks/473a1be2867482bb.js","async":true}]
e:["$","script","script-1",{"src":"/_next/static/chunks/a5d1ba47f41dfe06.js","async":true}]
f:["$","$L13",null,{"children":["$","$14",null,{"name":"Next.MetadataOutlet","children":"$@15"}]}]
15:null
